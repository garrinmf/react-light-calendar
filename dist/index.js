"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var n=require("react"),p=e(n),f=e(require("timestamp-utils")),y=e(require("lodash.times"));function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?u(e):t}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){e=e||(new Date).getTime();var t=h(f.decompose(e),3),n=t[0],a=t[1],r=g(f.addDays(e,1-t[2])),o=b[a-1]||(function(e){return e%4==0&&e%100!=0||e%400==0}(n)?29:28),c=f.addDays(r,o-1),i=f.getWeekDay(r);return{firstMonthDay:r,lastMonthDay:c,firstDayToDisplay:f.addDays(r,-i),month:a,year:n}}function v(e,t){return{startDate:t?e?Math.min(e,t):null:e,endDate:t&&t!==e?Math.max(e,t):null}}function m(e){return"0".concat(e).slice(-2)}var b=[31,null,31,30,31,30,31,31,30,31,30,31],g=function(e){var t=h(f.decompose(e),7);return f.add(e,{hours:-t[3],minutes:-t[4],seconds:-t[5],milliseconds:-t[6]})},D=function(){function r(){var e,i;c(this,r);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return l(u(i=d(this,(e=s(r)).call.apply(e,[this].concat(n)))),"onHoursChange",function(e){var t=i.props;(0,t.onTimeChange)(f.setHours(t.date,parseInt(e.target.value,10)))}),l(u(i),"onMinutesChange",function(e){var t=i.props;(0,t.onTimeChange)(f.setMinutes(t.date,parseInt(e.target.value,10)))}),l(u(i),"render",function(){var e=i.props,t=e.date,n=e.displayTime,a=e.dayLabels,r=e.monthLabels,o=f.getHours(t),c=f.getMinutes(t);return p.createElement("div",{className:"rlc-date-details-wrapper"},p.createElement("div",{className:"rlc-date-details"},p.createElement("div",{className:"rlc-date-number"},f.getDay(t)),p.createElement("div",{className:"rlc-date-day-month-year"},p.createElement("div",{className:"rlc-detail-day"},a[f.getWeekDay(t)]),p.createElement("div",{className:"rlc-detail-month-year"},r[f.getMonth(t)-1]," ",p.createElement("span",{className:"rlc-detail-year"},f.getYear(t))))),n&&p.createElement("div",{className:"rlc-date-time-selects"},p.createElement("select",{onChange:i.onHoursChange,value:o},y(24).map(function(e){return p.createElement("option",{value:m(e),key:e},m(e))})),p.createElement("span",{className:"rlc-time-separator"},":"),p.createElement("select",{onChange:i.onMinutesChange,value:c},y(60).map(function(e){return p.createElement("option",{value:m(e),key:e},m(e))}))))}),i}return i(r,n.Component),r}(),E=function(){function o(){var e,r;c(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return l(u(r=d(this,(e=s(o)).call.apply(e,[this].concat(n)))),"prevYear",function(){return r.props.onChange({yearOffset:-1})}),l(u(r),"prevMonth",function(){return r.props.onChange({monthOffset:-1})}),l(u(r),"nextYear",function(){return r.props.onChange({yearOffset:1})}),l(u(r),"nextMonth",function(){return r.props.onChange({monthOffset:1})}),l(u(r),"render",function(){var e=r.props,t=e.monthLabels,n=e.month,a=e.year;return p.createElement("div",{className:"rlc-month-and-year-wrapper"},p.createElement("div",{className:"rlc-navigation-button-wrapper rlc-prevs"},p.createElement("div",{className:"rlc-navigation-button rlc-prev-year",onClick:r.prevYear},"<<"),p.createElement("div",{className:"rlc-navigation-button rlc-prev-month",onClick:r.prevMonth},"<")),p.createElement("div",{className:"rlc-month-and-year"},t[n-1]," ",p.createElement("span",null,a)),p.createElement("div",{className:"rlc-navigation-button-wrapper rlc-nexts"},p.createElement("div",{className:"rlc-navigation-button rlc-next-month",onClick:r.nextMonth},">"),p.createElement("div",{className:"rlc-navigation-button rlc-next-year",onClick:r.nextYear},">>")))}),r}return i(o,n.Component),o}(),t=function(){function t(e){var m;return c(this,t),l(u(m=d(this,s(t).call(this,e))),"componentDidUpdate",function(e){var t=m.props,n=t.timezone,a=t.startDate,r=t.endDate;n!==e.timezone&&f.setTimezone(n),a===e.startDate&&r===e.endDate||m.setState(m.getInitialState(m.props))}),l(u(m),"getInitialState",function(e){var t=e.startDate,n=e.endDate;return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(n,!0).forEach(function(e){l(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},o(t),{},v(t,n))}),l(u(m),"onClickDay",function(e){var t=m.state,n=t.startDate;m.update(n?n&&!t.endDate?v(n,e):{startDate:e,endDate:null}:{startDate:e})}),l(u(m),"changeMonth",function(e){var t=e.yearOffset,n=e.monthOffset,a=f.add(m.state.firstMonthDay,{months:void 0===n?0:n,years:void 0===t?0:t});m.setState(o(a))}),l(u(m),"update",function(e){var t=e.startDate,n=e.endDate;m.props.onChange(void 0===t?m.props.startDate:t,void 0===n?m.props.endDate:n)}),l(u(m),"getClassNames",function(e){var t=m.state,n=t.firstMonthDay,a=t.lastMonthDay,r=t.endDate,o=m.props.disableDates,c=g(t.startDate),i=g(r),s=l({"rlc-day-disabled":o(e),"rlc-day-today":e===g((new Date).getTime()),"rlc-day-inside-selection":function(e,t,n){return t<e&&e<n}(e,c,i),"rlc-day-out-of-month":function(e,t,n){return e<t||n<e}(e,n,a),"rlc-day-selected":!r&&c===e,"rlc-day-start-selection":r&&c===e,"rlc-day-end-selection":r&&i===e},"rlc-day-".concat(e),!0);return Object.entries(s).reduce(function(e,t){var n=h(t,2),a=n[0];return n[1]?"".concat(e," ").concat(a):e},"")}),l(u(m),"render",function(){var e=m.state,t=e.firstDayToDisplay,n=e.startDate,a=e.endDate,r=e.month,o=e.year,c=m.props,i=c.disableDates,s=c.displayTime,l=c.dayLabels,u=c.monthLabels,d=c.markedDays;return p.createElement("div",{className:"rlc-calendar"},p.createElement("div",{className:"rlc-details"},!!n&&p.createElement(D,{dayLabels:l,monthLabels:u,date:n,displayTime:s,onTimeChange:function(e){return m.update({startDate:e})}}),!!a&&p.createElement(D,{dayLabels:l,monthLabels:u,date:a,displayTime:s,onTimeChange:function(e){return m.update({endDate:e})}})),p.createElement(E,{monthLabels:u,month:r,year:o,onChange:m.changeMonth}),p.createElement("div",{className:"rlc-days-label"},l.map(function(e){return p.createElement("div",{className:"rlc-day-label",key:e.toLowerCase()},e.slice(0,2))})),p.createElement("div",{className:"rlc-days"},function(t){return y(42,function(e){return f.addDays(t,e)})}(t).map(function(e){return p.createElement("div",{className:"rlc-day ".concat(m.getClassNames(e)).concat(d&&d.map(function(e){return g(e)}).includes(e)?" marked-day":""),key:e,onClick:function(){return!i(e)&&m.onClickDay(e)}},parseInt(f.getDay(e),10))})))}),f.setTimezone(e.timezone),m.state=m.getInitialState(e),m}return i(t,n.Component),t}();t.defaultProps={startDate:null,endDate:null,onChange:function(){},disableDates:function(){return!1},displayTime:!1,dayLabels:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],monthLabels:["January","February","March","April","May","June","July","August","September","October","November","December"],timezone:"UTC",markedDays:null},module.exports=t;
